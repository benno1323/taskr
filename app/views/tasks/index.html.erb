<div class="container">
  <%= link_to "Add Task", new_task_path, class: "btn btn-outline-primary" %>
  </br>
  </br>

  <ul class="nav nav-tabs" id="myTab" role="tablist">
    <li class="nav-item">
      <a class="nav-link active" id="all-tab" data-toggle="tab" href="#all"
         role="tab" aria-controls="all" aria-selected="true">New</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" id="open-tab" data-toggle="tab" href="#open"
         role="tab" aria-controls="open" aria-selected="false">Open</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" id="closed-tab" data-toggle="tab" href="#closed"
         role="tab" aria-controls="closed" aria-selected="false">Closed</a>
    </li>
  </ul>
  <div class="tab-content" id="myTabContent">
    <div class="tab-pane fade show active" id="all" role="tabpanel" aria-labelledby="all-tab">
      <table class="table table-bordered">
        <thead class="thead-dark text-center">
          <tr>
            <th scope="col">Subject</th>
            <th scope="col">Description</th>
            <th scope="col">Priority</th>
            <th scope="col">Due Date</th>
          </tr>
        </thead>
        <tbody class="text-left">
          <% @tasks.each do |task| %>
          <tr>
            <td><%= link_to task.subject, task %></td>
            <td><%= task.description.truncate(20) %></td>
            <td>
              <span class = "<%= 'badge badge-pill badge-danger btn-block' if task.priority == 'High' %>">
              <span class = "<%= 'badge badge-pill badge-warning btn-block' if task.priority == 'Medium' %>">
              <span class = "<%= 'badge badge-pill badge-success btn-block' if task.priority == 'Low' %>">
                <%= task.priority %>
              </span>
            </td>
            <td class="text-center"><%= task.due_date %></td>
          </tr>
          <% end %>
        </tbody>
      </table>
    </div>

    <!-- OPEN TASKS -->
    <div class="tab-pane fade" id="open" role="tabpanel" aria-labelledby="open-tab">
      <table class="table table-bordered">
        <thead class="thead-dark text-center">
          <tr>
            <th scope="col">Subject</th>
            <th scope="col">Description</th>
            <th scope="col">Priority</th>
            <th scope="col">Due Date</th>
          </tr>
        </thead>
        <tbody class="text-left">
          <% @open_tasks.each do |task| %>
          <tr>
            <td><%= link_to task.subject, task %></td>
            <td><%= task.description.truncate(20) %></td>
            <td>
              <span class = "<%= 'badge badge-pill badge-danger btn-block' if task.priority == 'High' %>">
              <span class = "<%= 'badge badge-pill badge-warning btn-block' if task.priority == 'Medium' %>">
              <span class = "<%= 'badge badge-pill badge-success btn-block' if task.priority == 'Low' %>">
                <%= task.priority %>
              </span>
            </td>
            <td class="text-center"><%= task.due_date %></td>
          </tr>
          <% end %>
        </tbody>
      </table>
    </div>

    <!-- CLOSED TASKS -->
    <div class="tab-pane fade" id="closed" role="tabpanel" aria-labelledby="closed-tab">
      <table class="table table-bordered">
        <thead class="thead-dark text-center">
          <tr>
            <th scope="col">Subject</th>
            <th scope="col">Description</th>
            <th scope="col">Priority</th>
            <th scope="col">Due Date</th>
          </tr>
        </thead>
        <tbody class="text-left">
          <% @closed_tasks.each do |task| %>
          <tr>
            <td><%= link_to task.subject, task %></td>
            <td><%= task.description.truncate(20) %></td>
            <td>
              <span class = "<%= 'badge badge-pill badge-danger btn-block' if task.priority == 'High' %>">
              <span class = "<%= 'badge badge-pill badge-warning btn-block' if task.priority == 'Medium' %>">
              <span class = "<%= 'badge badge-pill badge-success btn-block' if task.priority == 'Low' %>">
                <%= task.priority %>
              </span>
            </td>
            <td class="text-center"><%= task.due_date %></td>
          </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>
